<br><br>
<div class="filter-icon-div"><span class="filter-class">Filters</span><mat-icon>filter_list</mat-icon></div>
<ng-container *ngFor="let appliedList of data; let j = index">
<div class="header"> <mat-icon class="icon">keyboard_arrow_down</mat-icon>&nbsp;&nbsp;<span class="header-text">{{ appliedList.appliedVisitName }}</span></div>


<table id="mainTable">
    <tbody class="mainDiv" *ngFor="let ed of appliedList.appliedVisitList; let i = index">
    <tr class="table-header-color" *ngIf='!i'>
      <th>DATA TRAJECTORYs</th>
      <th>EXPECTED DATA CATEGORY</th> 
      <th>SOURCE</th>
      <th>DATA TRANSFER FREQUENCY</th>
      <th>CRITICAL DATA</th>
    </tr>

    <tr *ngIf="rowstate[j][i]">
        
        <td (click)="togglePanel(i,j)"> <mat-icon class="icon-1">{{arrowState[j][i]}}</mat-icon><span class="text-align">{{ed.appliedDataTrajectory}}</span></td>
        <td>{{ed.expectedDataCategory}}</td>
        <td>{{ed.source}}</td>
        <td>{{ed.dataTransferFrequency}}</td>
        <td>{{ed.criticalData}}</td>
    </tr> 
   <!-- <tr id="hide-div"><td colspan="6"><div>This is the div</div></td></tr>-->
   <ng-container *ngIf="panelState[j][i] && ed?.idrpCheckList !== null">
    <tr><td class="check-table" colspan="6">
     <table>
       <tr><th id="header-row"colspan="10">{{ed.expectedDataCategory}} IDRP Checks</th></tr>
        <tr class="second-row">
          <th>Purpose</th>
          <th>Description</th> 
          <th>Visit</th>
          <th>Role</th>
          <th>Method</th> 
          <th>Frequency</th>
          <th>Owner</th>
          <th>Check Name</th> 
          <th>Query Text</th>
          <th>Source</th>
        </tr>
        <tr class="second-table" *ngFor="let d of ed?.idrpCheckList; let i = index">
          <td>{{d.purpose}}</td>
          <td id="description">{{d.description}}</td> 
          <td>{{d.visit}}</td>
          <td>{{d.role}}</td>
          <td>{{d.method}}</td> 
          <td>{{d.frequency}}</td>
          <td>{{d.owner}}</td>
          <td>{{d.checkName}}</td> 
          <td>{{d.queryText}}</td>
          <td>{{d.source}}</td>

        </tr>
      </table>
    </td></tr></ng-container>
  </tbody>
</table><br>
</ng-container>
